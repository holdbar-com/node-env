import { load } from './lib/changes.js';
import { sync } from './lib/chrono.js';
import { compile } from './lib/compiler.js';
export async function build(reporter, path) {
    const changes = await load(path);
    await Promise.all([changes.preCompile(reporter, path), sync()]);
    const { sourceFiles, outputFiles } = compile(reporter, path);
    return await changes.postCompile(reporter, path, sourceFiles, Promise.resolve(outputFiles));
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVpbGQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJidWlsZC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFDeEMsT0FBTyxFQUFFLElBQUksRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBQ3ZDLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUc1QyxNQUFNLENBQUMsS0FBSyxVQUFVLEtBQUssQ0FBQyxRQUFrQixFQUFFLElBQVk7SUFDMUQsTUFBTSxPQUFPLEdBQUcsTUFBTSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDakMsTUFBTSxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ2hFLE1BQU0sRUFBRSxXQUFXLEVBQUUsV0FBVyxFQUFFLEdBQUcsT0FBTyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUM3RCxPQUFPLE1BQU0sT0FBTyxDQUFDLFdBQVcsQ0FDOUIsUUFBUSxFQUNSLElBQUksRUFDSixXQUFXLEVBQ1gsT0FBTyxDQUFDLE9BQU8sQ0FBQyxXQUFXLENBQUMsQ0FDN0IsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBsb2FkIH0gZnJvbSAnLi9saWIvY2hhbmdlcy5qcyc7XG5pbXBvcnQgeyBzeW5jIH0gZnJvbSAnLi9saWIvY2hyb25vLmpzJztcbmltcG9ydCB7IGNvbXBpbGUgfSBmcm9tICcuL2xpYi9jb21waWxlci5qcyc7XG5pbXBvcnQgeyBSZXBvcnRlciB9IGZyb20gJy4vbGliL3JlcG9ydGVyLmpzJztcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGJ1aWxkKHJlcG9ydGVyOiBSZXBvcnRlciwgcGF0aDogc3RyaW5nKSB7XG4gIGNvbnN0IGNoYW5nZXMgPSBhd2FpdCBsb2FkKHBhdGgpO1xuICBhd2FpdCBQcm9taXNlLmFsbChbY2hhbmdlcy5wcmVDb21waWxlKHJlcG9ydGVyLCBwYXRoKSwgc3luYygpXSk7XG4gIGNvbnN0IHsgc291cmNlRmlsZXMsIG91dHB1dEZpbGVzIH0gPSBjb21waWxlKHJlcG9ydGVyLCBwYXRoKTtcbiAgcmV0dXJuIGF3YWl0IGNoYW5nZXMucG9zdENvbXBpbGUoXG4gICAgcmVwb3J0ZXIsXG4gICAgcGF0aCxcbiAgICBzb3VyY2VGaWxlcyxcbiAgICBQcm9taXNlLnJlc29sdmUob3V0cHV0RmlsZXMpXG4gICk7XG59XG4iXX0=